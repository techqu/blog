---
title: "《深入理解java虚拟机》第三章 垃圾收集器与内存分配策略"
date: 2018-12-20T08:44:54+08:00
draft: false
author: "瞿广"
originallink: ""
summary: "这里填写文章文章摘要。"
tags: ["java","JVM","虚拟机"]
categories: ["Tech"]
---

##### 对象已死吗？
- 引用计数法（缺陷：互相引用，无法回收）
- 可达性分析算法
    - 可作为GC Roots的对象
        - 虚拟机栈（栈帧中的本地变量表）中引用的对象
        - 方法区中类静态属性引用的对象
        - 方法区中常量引用的对象
        - 本地方法栈中JNI（即一般说的Native方法）引用的对象
- 引用的几种
    - 强引用
    - 软引用
    - 弱引用
    - 虚引用
##### 垃圾收集算法
- 标记-清除算法
- 复制算法
- 标记-整理算法
- 分代收集算法
    - 在新生代，每次垃圾收集时都有大量对象死去，只有少量存活，那就选用复制算法。
    - 在老年代中因为对象存活率高，没有额外空间对它进行分配担保，那就必须使用“标记-清理”或者“标记-整理”算法来进行回收

##### 垃圾收集器

- **Serial收集器**：简单高效。单线程、stop the world（停止所有工作线程）。适合client模式的虚拟机
- ParNew收集器：Serial收集器的多线程版本，共用了相当多的代码。server模式的虚拟机首选新生代收集器。
- **Parallel Scavenge收集器**：新生代收集器、复制算法、并发多线程收集器，这些和ParNew收集器都一样。不同：关注点不同。又叫“吞吐量优先”收集器。吞吐量=运行用户代码时间/（运行用户代码时间+垃圾收集时间）。而CMS等收集器的关注点是尽可能地缩短垃圾收集时用户线程的停顿时间。
- **Serial Old 收集器**：Serial收集器的老年代版本，单线程，使用标记-整理算法。主要是Client模式下的虚拟机使用。
- **CMS（Concurrent Mark Sweep） 收集器**：是一种以获取最短回收停顿时间为目标的收集器。基于标记-清除算法实现。
- **G1收集器**